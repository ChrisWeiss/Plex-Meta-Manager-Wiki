You can build different collections using the features of Plex.

No configuration is required for these builders.

| Name | Attribute | Description | Works with Movies | Works with Shows |
| :--- | :--- | :--- | :---: | :---: |
| [Plex All](#plex-all) | `plex_all` | Gets every movie/show in your library. Useful with [collection filters](https://github.com/meisnate12/Plex-Meta-Manager/wiki/Collection-Filters) | :heavy_check_mark: | :heavy_check_mark: |
| [Plex Collectionless](#plex-collectionless) | `plex_collectionless` | Gets every movie/show that is not in a collection | :heavy_check_mark: | :heavy_check_mark: |
| [Plex Search](#plex-search) | `plex_search` | Gets every movie/show based on the search parameters provided | :heavy_check_mark: | :heavy_check_mark: |

## Plex All
Gets every movie/show in your library. Useful with [collection filters](https://github.com/meisnate12/Plex-Meta-Manager/wiki/Collection-Filters).

The expected input is either true or false.

```yaml
collections:
  9.0 Movies:
    all: true
    filters:
      rating.gte: 9
```

## Plex Collectionless
**This is not needed if you're using [Smart Label Collections](https://github.com/meisnate12/Plex-Meta-Manager/wiki/Smart-Builders#smart-label).**

Gets every movie/show that is not in a collection unless the collection is in the exclusion list. This is a special collection type to help keep your library looking correct. When items in your library are in multiple collections it can mess up how they're displayed in your library.

For Example, if you have a `Marvel Cinematic Universe` Collection set to `Show this collection and its items` and an `Iron Man` Collection set to `Hide items in this collection` what happens is the show overrides the hide and you end up with both the collections and the 3 Iron Man movies all displaying.

Alternatively, if you set the `Marvel Cinematic Universe` Collection to `Hide items in this collection` then movies without a collection like `The Incredible Hulk` will be hidden from the library view.

To combat the problem above you set all collections to `Hide items in this collection` then create a collection set to `Hide collection` and put every movie that you still want to display in that collection. 

With the variability of collections generated by the Plex Meta Manager maintaining a collection like this becomes very difficult, so in order to automate it, you can use `plex_collectionless`. You just have to tell it what collections to exclude or what collection prefixes to exclude.

There are two attributes for `plex_collectionless`, `exclude` (To exclude specific collections) and `exclude_prefix` (To exclude every collection whose title or sort title starts with the prefix). At least one exclusion is required.

```yaml
collections:
  Collectionless:
    plex_collectionless:
      exclude_prefix:
        - +
        - ~
      exclude: Marvel Cinematic Universe
    sort_title: ~_Collectionless
    collection_order: alpha
```

* Both `exclude` and `exclude_prefix` can take multiple values as a List.
* This is a known issue with Plex Collection and there is a [Feature Suggestion](https://forums.plex.tv/t/collection-display-issue/305406) detailing the issue more on their forms.

## Plex Search
Uses Plex's [Advance Filters](https://support.plex.tv/articles/201273953-collections/) to add all items to a collection based on the search parameters provided.

Any Advance Filter made using the Plex UI should be able to be recreated using `plex_search`. If you're having trouble getting `plex_search` to work correctly, build the collection you want inside of Plex's Advance Filters and take a screenshot of the parameters in the Plex UI and post it in either the [Discussions](https://github.com/meisnate12/Plex-Meta-Manager/discussions) or on [Discord](https://discord.gg/TsdpsFYqqm) and I'll do my best to help you. 

like Plex's [Advance Filters](https://support.plex.tv/articles/201273953-collections/) you have to start each search with either `any` or `all` as a base. You can only have one base attribute and all search attributes must be under the base.

Inside the base attribute you can use any search below or nest more `any` or `and`. You can have as many nested `any` or `and` next to each other as you want. If using multiple `any` or `and` you will have to do so in the form of a list.  

There are a couple other attributes you can have at the top level only along with the base attribute are:

### Special Attributes

| Special Option | Attribute | Description | Default |
| :--- | :--- | :--- | :---: |
| Type | `type` | The Type of items inside this collection<br>**Options**: `movies`, `shows`, `seasons`, and `episodes` | `movies` for Movies Libraries and `shows` for Show Libraries |
| Limit | `limit` | The max number of item for the filter | all |
| Sort By | `sort_by` | This will control how the filter is sorted in your library. You can use any sort options for your search type in the [Sorts Table](#sorts-table) | `random` |
| Validate | `validate` | Determines if a collection will fail on a validation error<br>**Options**: `true` or `false` | `true` |

### Sort Options

| Sorts | Description | Movies | Shows | Seasons | Episodes |
| :--- | :--- | :---: | :---: | :---: | :---: |
| `title.asc`/`title.desc` | Sort by Title | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: |
| `season.asc`/`season.desc` | Sort by Season | :x: | :x: | :heavy_check_mark: | :x: |
| `show.asc`/`show.desc` | Sort by Show | :x: | :x: | :heavy_check_mark: | :heavy_check_mark: |
| `year.asc`/`year.desc` | Sort by Year | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: |
| `release.asc`/<br>`release.desc` | Sort by Release Date (Originally Available) | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: |
| `critic_rating.asc`/<br>`critic_rating.desc` | Sort by Critic Rating | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: |
| `audience_rating.asc`/<br>`audience_rating.desc` | Sort by Audience Rating | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: |
| `user_rating.asc`/<br>`user_rating.desc` | Sort by User Rating | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |
| `content_rating.asc`/<br>`content_rating.desc` | Sort by Content Rating | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: |
| `duration.asc`/`duration.desc` | Sort by Duration | :heavy_check_mark: | :x: | :x: | :heavy_check_mark: |
| `plays.asc`/`plays.desc` | Sort by Number of Plays | :heavy_check_mark: | :x: | :x: | :heavy_check_mark: |
| `added.asc`/`added.desc` | Sort by Date Added | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |
| `episode_added.asc`/<br>`episode_added.desc` | Sort by Last Episode Date Added | :x: | :heavy_check_mark: | :x: | :x: |
| `random` | Sort by Random | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |

### Searches

There are three fields per filter option when using Plex's Advance Filters in the Web UI. The first is the **Filter Field** (what field you wish to filter), the second is the **Filter Modifier** (which modifier to use), and the third is the **Filter Term** (actual term to filter).  

### Search Fields

| Search Field | Description | Movie<br>Libraries | Show<br>Libraries |
| :--- | :--- | :---: | :---: |
| `title` | Gets every item with the specified text contained in the title | :heavy_check_mark: | :heavy_check_mark: |
| `episode_title` | Gets every item which has an episode with the specified text contained in the title | :x: | :heavy_check_mark: |
| `studio` | Gets every item with the specified text contained in the studio | :heavy_check_mark: | :heavy_check_mark: |
| `network` | Gets every item with the specified network<br>**Only works with the New Plex TV Agent** | :x: | :heavy_check_mark: |
| `actor` | Gets every item with the specified actor | :heavy_check_mark: | :heavy_check_mark: |
| `audio_language` | Gets every item with the specified audio language | :heavy_check_mark: | :heavy_check_mark: |
| `collection` | Gets item with the specified collection | :heavy_check_mark: | :heavy_check_mark: |
| `content_rating` | Gets item with the specified content rating | :heavy_check_mark: | :heavy_check_mark: |
| `country` | Gets every item with the specified country | :heavy_check_mark: | :x: |
| `director` | Gets every item with the specified director | :heavy_check_mark: | :x: |
| `genre` | Gets every item with the specified genre | :heavy_check_mark: | :heavy_check_mark: |
| `label` | Gets every item with the specified label | :heavy_check_mark: | :heavy_check_mark: |
| `producer` | Gets every item with the specified producer | :heavy_check_mark: | :x: |
| `subtitle_language` | Gets every item with the specified subtitle language | :heavy_check_mark: | :heavy_check_mark: |
| `writer` | Gets every item with the specified writer | :heavy_check_mark: | :x: |
| `decade` | Gets every item from the specified year + the 9 that follow i.e. 1990 will get you 1990-1999 | :heavy_check_mark: | :x: |
| `resolution` | Gets every item with the specified resolution | :heavy_check_mark: | :heavy_check_mark: |
| `hdr` | `true`: Gets every item with HDR<br>`false`: Gets every item without HDR | :heavy_check_mark: | :heavy_check_mark: |
| `unmatched` | `true`: Gets every unmatched item<br>`false`: Gets every matched item | :heavy_check_mark: | :x: |
| `duplicate` | `true`: Gets every duplicate item<br>`false`: Gets every item that's not a duplicate | :heavy_check_mark: | :x: |
| `unplayed` | `true`: Gets every unplayed item<br>`false`: Gets every played item | :heavy_check_mark: | :x: |
| `progress` | `true`: Gets every item in progress<br>`false`: Gets every item not in progress | :heavy_check_mark: | :x: |
| `trash` | `true`: Gets every item in the trash<br>`false`: Gets every item not in the trash | :heavy_check_mark: | :x: |
| `unplayed_episodes` | `true`: Gets every item that has unplayed episodes<br>`false`: Gets every item that doesn't have unplayed episodes< | :x: | :heavy_check_mark: |
| `episode_unplayed` | `true`: Gets every item that has episodes unplayed<br>`false`: Gets every item that doesn't have episodes unplayed< | :x: | :heavy_check_mark: |
| `episode_duplicate` | `true`: Gets every item that has duplicate episodes<br>`false`: Gets every item that doesn't have duplicate episodes< | :x: | :heavy_check_mark: |
| `episode_progress` | `true`: Gets every item that has episodes in progress<br>`false`: Gets every item that doesn't have episodes in progress< | :x: | :heavy_check_mark: |
| `episode_unmatched` | `true`: Gets every item that has episodes unmatched<br>`false`: Gets every item that doesn't have episodes unmatched< | :x: | :heavy_check_mark: |
| `added` | Gets every item added to plex before/after the specified date or in the last<br>**Format:** YYYY-MM-DD | :heavy_check_mark: | :heavy_check_mark: |
| `episode_added` | Gets every item which has an episode added to plex before/after the specified date or in the last <br>**Format:** YYYY-MM-DD | :x: | :heavy_check_mark: |
| `release` | Gets every item with a Release Date (Originally Available) before/after the specified date<br>**Format:** YYYY-MM-DD | :heavy_check_mark: | :x: |
| `episode_air_date` | Gets every item which has an episode air date (Originally Available) before/after the specified date<br>**Format:** YYYY-MM-DD | :x: | :heavy_check_mark: |
| `last_played` | Gets every item last played in plex before/after the specified date or in the last<br>**Format:** YYYY-MM-DD | :heavy_check_mark: | :heavy_check_mark: |
| `episode_last_played` | Gets every item which has an episode last played in plex before/after the specified date or in the last <br>**Format:** YYYY-MM-DD | :x: | :heavy_check_mark: |
| `duration` | Gets every item with a duration greater/less then the specified number of minutes | :heavy_check_mark: | :x: |
| `plays` | Gets every item where the number of plays is greater/less then the specified number of plays | :heavy_check_mark: | :x: |
| `episode_plays` | Gets every item which has an episode where the number of plays is greater/less then the specified number of plays | :x: | :heavy_check_mark: |
| `audience_rating` | Gets every item with an audience rating greater/less then the specified number | :heavy_check_mark: | :heavy_check_mark: |
| `critic_rating` | Gets every item with a critic rating greater/less then the specified number | :heavy_check_mark: | :heavy_check_mark: |
| `user_rating` | Gets every item with a user rating greater/less then the specified number | :heavy_check_mark: | :heavy_check_mark: |
| `episode_user_rating` | Gets every item which has an episode with a user rating greater/less then the specified number | :x: | :heavy_check_mark: |
| `year` | Gets every item with the specified year or greater/less then the specified year | :heavy_check_mark: | :heavy_check_mark: |
| `episode_year` | Gets every item which has an episode with the specified year or greater/less then the specified year | :x: | :heavy_check_mark: |

### Search Modifiers

Each modifier translates directly from a modifier in the Web UI's modifier drop-down.

| Modifier | Description | Plex Web UI Option |
| :--- | :--- | :---: |
| No Modifier | Matches the search term at least one search term exactly for every field except:<br>**String Fields** match every item that contains the search term<br>**String Fields**: `title`, `episode_title`, & `studio`<br>**Date Fields** take an integer and match every item in that past many days<br>**Date Fields**: `added`, `episode_added`, `release`, & `episode_air_date`| `is` for most<br>`contains` for **String Fields**<br>`in the last` for **Date Fields** |
| `.not` | Matches every item that does not have any of the exact search terms for every field except:<br>**String Fields** match every item that does not contain the search term<br>**String Fields**: `title`, `episode_title`, & `studio`<br>**Date Fields** take an integer and match every item not in that past many days<br>**Date Fields**: `added`, `episode_added`, `release`, & `episode_air_date`| `is not` for most<br>`does not contain` for **String Fields**<br>`in not the last` for **Date Fields** |
| `.begins` | Matches every item that starts with at least one search term | `begins with` |
| `.ends` | Matches every item that ends with at least one search term | `ends with` |
| `.before` | Matches every item that is before the specified date | `is before` |
| `.after` | Matches every item that is after the specified date | `is after` |
| `.gt` | Matches every item that is greater than specified number | `is greater than` |
| `.gte` | Matches every item that is greater than or equal to the specified number | N/A |
| `.lt` | Matches every item that is less than specified number | `is less than` |
| `.lte` | Matches every item that is less than or equal to the specified number | N/A |

| Search Field | No Modifier | `.not` | `.begins`/<br>`.ends` | `.before`/<br>`.after` | `.gt`/`.gte`/<br>`.lt`/`.lte` |
| :--- | :---: | :---: | :---: | :---: | :---: |
| `title` | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: |
| `episode_title` | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: |
| `studio` | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: |
| `actor` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `audio_language` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `collection` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `content_rating` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `country` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `director` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `genre` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `label` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `network` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `producer` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `subtitle_language` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `writer` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :x: |
| `decade` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `resolution` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `hdr` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `unmatched` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `duplicate` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `unplayed` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `progress` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `trash` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `unplayed_episodes` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `episode_unplayed` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `episode_duplicate` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `episode_progress` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `episode_unmatched` | :heavy_check_mark: | :x: | :x: | :x: | :x: |
| `added` | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: | :x: |
| `episode_added` | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: | :x: |
| `release` | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: | :x: |
| `episode_air_date` | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: | :x: |
| `last_played` | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: | :x: |
| `episode_last_played` | :heavy_check_mark: | :heavy_check_mark: | :x: | :heavy_check_mark: | :x: |
| `plays` | :x: | :x: | :x: | :x: | :heavy_check_mark: |
| `episode_plays` | :x: | :x: | :x: | :x: | :heavy_check_mark: |
| `duration` | :x: | :x: | :x: | :x: | :heavy_check_mark: |
| `audience_rating` | :x: | :x: | :x: | :x: | :heavy_check_mark: |
| `critic_rating` | :x: | :x: | :x: | :x: | :heavy_check_mark: |
| `user_rating` | :x: | :x: | :x: | :x: | :heavy_check_mark: |
| `episode_user_rating` | :x: | :x: | :x: | :x: | :heavy_check_mark: |
| `year` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :heavy_check_mark: |
| `episode_year` | :heavy_check_mark: | :heavy_check_mark: | :x: | :x: | :heavy_check_mark: |

* To use Multiple values with `title`, `episode_title`, and `studio`
* Multiple values are supported as either a list or a comma-separated string for all modifiers except `.begins`, `.ends`, `.before`, `.after`, `.gt`, `.gte`, `.lt`, and `.lte`.
* If you want to restrict the search even further try using [Collection Filters](https://github.com/meisnate12/Plex-Meta-Manager/wiki/Collection-Filters).

```yaml
collections:
  Documentaries:
    plex_filter:
      all:
        genre: Documentary
```
```yaml
collections:
  Dave Chappelle Comedy:
    plex_filter:
      all:
        actor: Dave Chappelle
        genre: Comedy
```
```yaml
collections:
  Top Action Movies:
    plex_filter:
      all:
        genre: Action
      sort_by: audience_rating.desc
      limit: 20
```
```yaml
collections:
  90s Movies:
    plex_filter:
      any:
        year:
          - 1990
          - 1991
          - 1992
          - 1993
          - 1994
          - 1995
          - 1996
          - 1997
          - 1998
          - 1999
```
```yaml
collections:
  90s Movies:
    plex_filter:
      any:
        decade: 1990
```
```yaml
collections:
  Best 2010+ Movies:
    plex_filter:
      all:
        year.gte: 2010
      sort_by: audience_rating.desc
      limit: 20
```

If you specify TMDb Person ID's using the [Collection Detail](https://github.com/meisnate12/Plex-Meta-Manager/wiki/Collection-Details) `tmdb_person` and then tell either `actor`, `director`, `producer`, or `writer` to add `tmdb`, the script will translate the TMDb Person IDs into their names and run the search on those names.

```yaml
collections:
  Robin Williams:
    plex_filter:
      all:
        actor: tmdb
    tmdb_person: 2157
```
```yaml
collections:
  Steven Spielberg:
    plex_filter:
      all:
        director: tmdb
    tmdb_person: https://www.themoviedb.org/person/488-steven-spielberg
```
```yaml
collections:
  Quentin Tarantino:
    plex_filter:
      any:
        actor: tmdb
        director: tmdb
        producer: tmdb
        writer: tmdb
    tmdb_person: 138
```
